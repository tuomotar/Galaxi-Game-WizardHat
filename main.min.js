Tuomo


Search Drive

Drive
.
Folder Path
My Drive
tuomo_only
uudet_koodit
NEW 
Folders and views
My DriveCollapsed
Shared with me
Google Photos
Recent
Starred
Trash
12 GB of 15 GB used
Upgrade storage
.

Javascript
main.js

Javascript
main.min.js

Unknown File
settings.json
Get Drive for Mac
All selections cleared


(function(N,n){function d(a,c){this.x=a||0;this.y=c||0}function k(a){var c={};c.code=a;c.isDown=!1;c.isUp=!0;c.press=void 0;c.release=void 0;c.downHandler=function(a){a.keyCode===c.code&&(c.isUp&&c.press&&c.press(),c.isDown=!0,c.isUp=!1);a.preventDefault()};c.upHandler=function(a){a.keyCode===c.code&&(c.isDown&&c.release&&c.release(),c.isDown=!1,c.isUp=!0);a.preventDefault()};window.addEventListener("keydown",c.downHandler.bind(c),!1);window.addEventListener("keyup",c.upHandler.bind(c),!1);return c}
n(".loaderContainer").css("left",window.innerWidth/2+"px");var l,y;l=document.createElement("canvas");l.id="helperCanvas";l.style.position="absolute";document.body.appendChild(l);l.style.visibility="hidden";var r,g,B=[],m=new PIXI.Graphics;B.push(m);var a={gameState:"init html",sprites:{},points:0,loadedAssets:{},mainUrl:"http://yle.fi/galaxi/mazq/2015/peli2/",jsonUrl:"http://yle.fi/galaxi/mazq/2015/peli2/settings.json",mainRendererTransparent:!0,mainRendererId:"rendererContainer",current:{time:{}}},
e=[],t=[],E,f=[],m=new PIXI.Text("0",{font:"144px Arial",dropShadow:!0,dropShadowDistance:5,dropShadowColor:0,stroke:16777215,strokeThickness:10,fill:16777215,align:"center"});a.texts={};a.texts.scoreText=m;var z=100;a.texts.highScoreTexts=[];for(var u=0;10>u;u++)m=new PIXI.Text("0",{font:"60px Arial",dropShadow:!0,dropShadowDistance:5,dropShadowColor:0,stroke:0,strokeThickness:10,fill:16777215,align:"center"}),a.texts.highScoreTexts.push(m);var F=k(37),G=k(38),H=k(39),I=k(40),J=k(87),K=k(65),L=k(83),
M=k(68),m=k(85),u=k(32);n(window).load(function(){function b(){var b=new PIXI.loaders.Loader;b.baseUrl=a.s.urls.assets;for(var x in a.s.assets_bitmap)b.add(a.s.assets_bitmap[x].spriteName,a.s.assets_bitmap[x].filename);for(var d in a.s.assets_animated_spritesheet)b.add(a.s.assets_animated_spritesheet[d].spriteName,a.s.assets_animated_spritesheet[d].filename);return b}a.gameState="html done, loading settings json";n.getJSON(a.jsonUrl,function(d){a.gameState="json done, load assets";a.s=d;z+=a.s.designDim.h/
2;n("#"+a.mainRendererId).css("display","none");g=new PIXI.Stage(16711680);r=new PIXI.autoDetectRenderer(a.s.designDim.w,a.s.designDim.h,{transparent:a.mainRendererTransparent});l.width=a.s.designDim.w;l.height=a.s.designDim.h;y=l.getContext("2d");a.mainRendererDim=ttScalingManager.initRendererDimensions(r,a.s.designDim.w,a.s.designDim.h,a.mainRendererId,a.s.nonGameArea.w,a.s.nonGameArea.h);document.getElementById(a.mainRendererId).appendChild(r.view);b().on("progress",function(a){n("#loaderData").html(Math.round(a.progress))}).load(function(b,
d){n("#loaderData").html(Math.round(b.progress));n(".loaderContainer").css("display","none");a.loadedAssets=d;var c,h;for(h in d)"roller"==d[h].name?(c=PIXI.extras.MovieClip.fromFrames("g1.png g2.png g3.png g4.png g5.png g6.png g7.png g8.png g9.png g10.png g11.png g12.png g13.png g14.png g15.png g16.png g17.png g18.png g19.png g20.png g21.png g22.png g23.png g24.png g25.png g26.png g27.png g28.png g29.png g30.png g31.png g32.png g33.png g34.png g35.png g36.png".split(" ")),c.name=d[h].name,a.sprites[d[h].name]=
c):("character1"!=d[h].name?(c=new PIXI.Sprite(d[h].texture),c.name=d[h].name,c.cacheAsBitmap=!0):(c=new PIXI.Sprite(d[h].texture),c.name=d[h].name),a.sprites[d[h].name]=c,E=d[h].texture);c=[];c.push({audioName:"piste",audioFile:["game_assets/piste.mp3"],audioData:{volume:.2,loop:!1,format:"mp3",buffer:!1}});c.push({audioName:"game_start",audioFile:["game_assets/game_start.mp3"],audioData:{volume:.1,loop:!1,format:"mp3",buffer:!1}});c.push({audioName:"game_over",audioFile:["game_assets/game_over.mp3"],
audioData:{volume:.1,loop:!1,format:"mp3",buffer:!1}});c.push({audioName:"G_pomp",audioFile:["game_assets/G_pomp.mp3"],audioData:{volume:.3,loop:!1,format:"mp3",buffer:!1}});c.push({audioName:"metsa",audioFile:["game_assets/tausta_metsa.mp3"],audioData:{volume:.07,loop:!1,format:"mp3",buffer:!1}});c.push({audioName:"ujellus_1_d",audioFile:["game_assets/ujellus_1_d.mp3"],audioData:{volume:.02,loop:!1,format:"mp3",buffer:!1}});c.push({audioName:"ujellus_1_a",audioFile:["game_assets/ujellus_1_a.mp3"],
audioData:{volume:.02,loop:!1,format:"mp3",buffer:!1}});c.push({audioName:"ujellus_1_f_sharp",audioFile:["game_assets/ujellus_1_f_sharp.mp3"],audioData:{volume:.02,loop:!1,format:"mp3",buffer:!1}});c.push({audioName:"ujellus_2_b",audioFile:["game_assets/ujellus_2_b.mp3"],audioData:{volume:.02,loop:!1,format:"mp3",buffer:!1}});c.push({audioName:"ujellus_2_d",audioFile:["game_assets/ujellus_2_d.mp3"],audioData:{volume:.02,loop:!1,format:"mp3",buffer:!1}});c.push({audioName:"ujellus_2_g",audioFile:["game_assets/ujellus_2_g.mp3"],
audioData:{volume:.02,loop:!1,format:"mp3",buffer:!1}});c.push({audioName:"ujellus_3_b",audioFile:["game_assets/ujellus_3_b.mp3"],audioData:{volume:.05,loop:!1,format:"mp3",buffer:!1}});c.push({audioName:"ujellus_3_d",audioFile:["game_assets/ujellus_3_d.mp3"],audioData:{volume:.05,loop:!1,format:"mp3",buffer:!1}});c.push({audioName:"ujellus_3_g",audioFile:["game_assets/ujellus_3_g.mp3"],audioData:{volume:.05,loop:!1,format:"mp3",buffer:!1}});f=ttAudioLoader.loadAudios(c);a.gameState=a.s.GAME_STATES.ALL_LOADED;
ttMain.initMainLoop()})})});n(window).resize(function(){var b=a.gameState;a.gameState=a.s.GAME_STATES.SCALING;ttScalingManager.scaleRenderer();a.gameState=b});(function(b,c){b.highScoreTexts=[];b.loadTop10=function(){var d=c.getJSON(a.s.urls.top10ajax+"?get_top_10=true",function(a){});d.fail(function(a){console.log("Ajax fail.")});d.done(function(a){for(var c in a)b.highScoreTexts[c]={points:a[c][1],nick:a[c][0]};b.setHighScores()})};b.setHighScores=function(){for(var c in b.highScoreTexts)a.texts.highScoreTexts[c].text=
b.highScoreTexts[c].nick+" "+b.highScoreTexts[c].points};b.saveTop10=function(c){if(c>b.highScoreTexts[9].points){for(var d=5,e="ABC";3<d&&null!=e;)e=prompt("P\u00e4\u00e4sit Top 10 -listalle. Anna nimimerkki jonka pituus on 1 - 3 merkki\u00e4.",e),null==e&&(e="ABC"),d=e.length,1>d&&(d=5);null!=e&&(c=jQuery.ajax({method:"POST",url:a.s.urls.top10ajax,data:{save_top_10:c,nick:e}}),c.fail(function(a){console.log("Ajax fail.")}),c.done(function(a){a=eval(a);for(var c in a)b.highScoreTexts[c]={points:a[c][1],
nick:a[c][0]};b.setHighScores()}))}}})(window.ttHighScoreManager=window.ttHighScoreManager||{},jQuery);(function(a,c){a.loadAudios=function(a){var b=0,c=0,h=[],d;for(d in a)h[a[d].audioName]={},c++,h[a[d].audioName].audio=new Howl({urls:a[d].audioFile,loop:a[d].audioData.loop,volume:a[d].audioData.volume,format:a[d].audioData.format}),h[a[d].audioName].playing=!1,h[a[d].audioName].currentTime=0,b++;return h}})(window.ttAudioLoader=window.ttAudioLoader||{},jQuery);(function(b,c){b.ujellus_1_randomTriggerCounter=
0;b.ujellus_1_randomTime=1E3*Math.floor(25*Math.random());b.ujellus_1_soundsPlaying=0;b.ujellus_1_RandomFactor=0;b.ujellus_1_a_playing=!1;b.ujellus_1_d_playing=!1;b.ujellus_1_f_sharp_playing=!1;b.ujellus_1_EngineRun=function(a){0>a&&(a=1);0<a&&(b.ujellus_1_randomTriggerCounter+=a);b.ujellus_1_randomTriggerCounter>b.ujellus_1_randomTime&&(ujellus_1_randomTime=1E3*Math.floor(25*Math.random()),b.ujellus_1_randomTriggerCounter=0);0==b.ujellus_1_randomTriggerCounter&&(b.ujellus_1_RandomFactor=Math.floor(3*
Math.random()),0==b.ujellus_1_RandomFactor&&(f.ujellus_1_a.audio.play(),b.ujellus_1_a_playing=!0),1==b.ujellus_1_RandomFactor&&(f.ujellus_1_d.audio.play(),b.ujellus_1_d_playing=!0),2==b.ujellus_1_RandomFactor&&(f.ujellus_1_f_sharp.audio.play(),b.ujellus_1_f_sharp_playing=!0))};b.ujellus_2_randomTriggerCounter=0;b.ujellus_2_randomTime=1E3*Math.floor(25*Math.random());b.ujellus_2_soundsPlaying=0;b.ujellus_2_RandomFactor=0;b.ujellus_2_b_playing=!1;b.ujellus_2_d_playing=!1;b.ujellus_2_g_playing=!1;b.ujellus_2_EngineRun=
function(a){0>a&&(a=1);0<a&&(b.ujellus_2_randomTriggerCounter+=a);b.ujellus_2_randomTriggerCounter>b.ujellus_2_randomTime&&(ujellus_2_randomTime=1E3*Math.floor(25*Math.random()),b.ujellus_2_randomTriggerCounter=0);0==b.ujellus_2_randomTriggerCounter&&(b.ujellus_2_RandomFactor=Math.floor(3*Math.random()),0==b.ujellus_2_RandomFactor&&(f.ujellus_2_b.audio.play(),b.ujellus_2_b_playing=!0),1==b.ujellus_2_RandomFactor&&(f.ujellus_2_d.audio.play(),b.ujellus_2_d_playing=!0),2==b.ujellus_2_RandomFactor&&(f.ujellus_2_g.audio.play(),
b.ujellus_2_g_playing=!0))};b.ujellus_3_randomTriggerCounter=0;b.ujellus_3_randomTime=1E3*Math.floor(25*Math.random());b.ujellus_3_soundsPlaying=0;b.ujellus_3_RandomFactor=0;b.ujellus_3_b_playing=!1;b.ujellus_3_d_playing=!1;b.ujellus_3_g_playing=!1;b.ujellus_3_EngineRun=function(a){0>a&&(a=1);0<a&&(b.ujellus_3_randomTriggerCounter+=a);b.ujellus_3_randomTriggerCounter>b.ujellus_3_randomTime&&(ujellus_3_randomTime=1E3*Math.floor(25*Math.random()),b.ujellus_3_randomTriggerCounter=0);0==b.ujellus_3_randomTriggerCounter&&
(b.ujellus_3_RandomFactor=Math.floor(3*Math.random()),0==b.ujellus_3_RandomFactor&&(f.ujellus_3_b.audio.play(),b.ujellus_3_b_playing=!0),1==b.ujellus_3_RandomFactor&&(f.ujellus_3_d.audio.play(),b.ujellus_3_d_playing=!0),2==b.ujellus_3_RandomFactor&&(f.ujellus_3_g.audio.play(),b.ujellus_3_g_playing=!0))};b.loopCalculateTime=function(){a.current.time.timeNowMs=(new Date).getTime();a.current.time.timeDiffNowMs=a.current.time.timeNowMs-a.current.time.timePast1Ms;138441E7<a.current.time.timeDiffNowMs&&
(a.current.time.timeDiffNowMs=1);a.current.time.timeDiffNowMs>a.s.physics.deltaTMax&&(a.current.time.timeDiffNowMs=a.s.physics.deltaTMax);a.current.time.timeDiffNowMs<a.s.physics.deltaTMin&&(a.current.time.timeDiffNowMs=a.s.physics.deltaTMin);a.current.time.timePast1Ms=a.current.time.timeNowMs;a.current.time.finalCountdownCounterMs+=a.current.time.timeDiffNowMs;a.current.time.timeNowAsSeconds=Math.round(a.current.time.finalCountdownCounterMs/1E3);a.current.time.currentFrameRate=Math.round(1E3/a.current.time.timeDiffNowMs);
a.current.time.framerateUpdateCounterMs+=a.current.time.timeDiffNowMs};b.initMainLoop=function(){c("#"+a.mainRendererId).css("display","block");b.addSpritesToStage();for(var d in B)g.addChild(B[d]);ttScalingManager.scaleRenderer();a.gameState=a.s.GAME_STATES.START_START_SCREEN;ttHighScoreManager.loadTop10();b.runMainLoop()};b.addSpritesToStage=function(){a.sprites.background1.anchor.x=.5;a.sprites.background1.anchor.y=.5;a.sprites.background1.visible=!1;a.sprites.background1.position.x=a.s.designDim.w/
2;a.sprites.background1.position.y=a.s.designDim.h/2;a.sprites.background1.interactive=!0;g.addChild(a.sprites.background1);a.sprites.background1.mousedown=a.sprites.background1.touchstart=function(a){this.isdown=!0};a.sprites.background1.mouseup=a.sprites.background1.touchend=function(b){this.isdown=!1;a.gameState=a.s.GAME_STATES.START_GAME};a.sprites.background2.anchor.x=.5;a.sprites.background2.anchor.y=.5;a.sprites.background2.visible=!1;a.sprites.background2.position.x=a.s.designDim.w/2;a.sprites.background2.position.y=
a.s.designDim.h/2;g.addChild(a.sprites.background2);a.sprites.buttonUp.anchor.x=.5;a.sprites.buttonUp.anchor.y=.5;a.sprites.buttonUp.visible=!1;a.sprites.buttonUp.position.x=a.s.designDim.w/2;a.sprites.buttonUp.position.y=a.s.virtualKeyboardContainerLeftTopCorner.y+75;a.sprites.buttonUp.interactive=!0;g.addChild(a.sprites.buttonUp);a.sprites.buttonUp.mousedown=a.sprites.buttonUp.touchstart=G.press=J.press=function(b){a.sprites.buttonUp.isdown=!0;a.sprites.buttonUp.alpha=.5;a.sprites.character1.onSurface=
!1;a.sprites.character1.temporaryVelocityImpulse("up")};a.sprites.buttonUp.mouseup=a.sprites.buttonUp.touchend=G.release=J.release=function(b){a.sprites.buttonUp.isdown=!1;a.sprites.buttonUp.alpha=1};a.sprites.buttonDown.anchor.x=.5;a.sprites.buttonDown.anchor.y=.5;a.sprites.buttonDown.visible=!1;a.sprites.buttonDown.position.x=a.s.designDim.w/2;a.sprites.buttonDown.position.y=a.s.virtualKeyboardContainerLeftTopCorner.y+275;a.sprites.buttonDown.interactive=!0;g.addChild(a.sprites.buttonDown);a.sprites.buttonDown.mousedown=
a.sprites.buttonDown.touchstart=I.press=L.press=function(b){a.sprites.buttonDown.isdown=!0;a.sprites.buttonDown.alpha=.5;a.sprites.character1.temporaryVelocityImpulse("down")};a.sprites.buttonDown.mouseup=a.sprites.buttonDown.touchend=I.release=L.release=function(b){a.sprites.buttonDown.isdown=!1;a.sprites.buttonDown.alpha=1};a.sprites.buttonLeft.anchor.x=.5;a.sprites.buttonLeft.anchor.y=.5;a.sprites.buttonLeft.visible=!1;a.sprites.buttonLeft.position.x=a.s.designDim.w/2-a.sprites.buttonLeft.width;
a.sprites.buttonLeft.position.y=a.s.virtualKeyboardContainerLeftTopCorner.y+175;a.sprites.buttonLeft.interactive=!0;g.addChild(a.sprites.buttonLeft);a.sprites.buttonLeft.mousedown=a.sprites.buttonLeft.touchstart=F.press=K.press=function(b){a.sprites.buttonLeft.isdown=!0;a.sprites.buttonLeft.alpha=.5;a.sprites.character1.temporaryVelocityImpulse("left")};a.sprites.buttonLeft.mouseup=a.sprites.buttonLeft.touchend=F.release=K.release=function(b){a.sprites.buttonLeft.isdown=!1;a.sprites.buttonLeft.alpha=
1};a.sprites.buttonRight.anchor.x=.5;a.sprites.buttonRight.anchor.y=.5;a.sprites.buttonRight.visible=!1;a.sprites.buttonRight.position.x=a.s.designDim.w/2+a.sprites.buttonLeft.width;a.sprites.buttonRight.position.y=a.s.virtualKeyboardContainerLeftTopCorner.y+175;a.sprites.buttonRight.interactive=!0;g.addChild(a.sprites.buttonRight);a.sprites.buttonRight.mousedown=a.sprites.buttonRight.touchstart=H.press=M.press=function(b){a.sprites.buttonRight.isdown=!0;a.sprites.buttonRight.alpha=.5;a.sprites.character1.temporaryVelocityImpulse("right")};
a.sprites.buttonRight.mouseup=a.sprites.buttonRight.touchend=H.release=M.release=function(b){a.sprites.buttonRight.isdown=!1;a.sprites.buttonRight.alpha=1};a.sprites.wallBottom.anchor.x=0;a.sprites.wallBottom.anchor.y=0;a.sprites.wallBottom.visible=!1;a.sprites.wallBottom.position.x=a.s.nonGameArea.x;a.sprites.wallBottom.position.y=a.s.nonGameArea.y;a.sprites.wallBottom.moveDirection="up";a.sprites.wallBottom.staticInCollision=!0;g.addChild(a.sprites.wallBottom);a.sprites.wallLeft.anchor.x=.5;a.sprites.wallLeft.anchor.y=
.5;a.sprites.wallLeft.yMovement=400;a.sprites.wallLeft.visible=!1;a.sprites.wallLeft.position.x=a.sprites.wallLeft.width/2;a.sprites.wallLeft.position.y=a.sprites.wallLeft.height/2+a.sprites.wallLeft.yMovement;a.sprites.wallLeft.moveDirection="up";a.sprites.wallLeft.staticInCollision=!0;a.sprites.wallLeft.speed=a.s.physics.wallLeftOriginalSpeed;a.sprites.wallLeft.hitsCount=0;a.sprites.wallLeft.move=function(){this.position.y<=this.height/2&&(this.moveDirection="down",a.sprites.wallLeft.hitsCount++);
this.position.y>=this.height/2+this.yMovement&&(this.moveDirection="up",a.sprites.wallLeft.hitsCount++);a.sprites.wallLeft.hitsCount==a.s.physics.wallLeftSpeedHitsCountMax&&(a.sprites.wallLeft.hitsCount=0,a.sprites.wallLeft.speed=Math.floor(Math.random()*a.s.physics.wallLeftSpeedRandomMax+a.s.physics.wallLeftSpeedRandomMin));this.position="up"==this.moveDirection?new d(this.position.x,this.position.y-1):new d(this.position.x,this.position.y+1)};g.addChild(a.sprites.wallLeft);a.sprites.wallRight.anchor.x=
.5;a.sprites.wallRight.anchor.y=.5;a.sprites.wallRight.yMovement=400;a.sprites.wallRight.visible=!1;a.sprites.wallRight.position.x=a.s.designDim.w-a.sprites.wallRight.width/2;a.sprites.wallRight.position.y=a.sprites.wallRight.height/2+a.sprites.wallRight.yMovement;a.sprites.wallRight.moveDirection="up";a.sprites.wallRight.staticInCollision=!0;a.sprites.wallRight.speed=a.s.physics.wallLeftOriginalSpeed;a.sprites.wallRight.hitsCount=0;a.sprites.wallRight.move=function(){this.position.y<=this.height/
2&&(this.moveDirection="down",a.sprites.wallRight.hitsCount++);this.position.y>=this.height/2+this.yMovement&&(this.moveDirection="up",a.sprites.wallRight.hitsCount++);a.sprites.wallRight.hitsCount==a.s.physics.wallRightSpeedHitsCountMax&&(a.sprites.wallRight.hitsCount=0,a.sprites.wallRight.speed=Math.floor(Math.random()*a.s.physics.wallRightSpeedRandomMax+a.s.physics.wallRightSpeedRandomMin));this.position="up"==this.moveDirection?new d(this.position.x,this.position.y-a.sprites.wallRight.speed):
new d(this.position.x,this.position.y+a.sprites.wallRight.speed)};g.addChild(a.sprites.wallRight);a.sprites.character1.anchor.x=.5;a.sprites.character1.anchor.y=.5;a.sprites.character1.visible=!1;a.sprites.character1.position.x=a.s.designDim.w/4*3;a.sprites.character1.position.y=a.s.designDim.h+100;g.addChild(a.sprites.character1);e.push(a.sprites.character1);t.push(a.sprites.character1);a.sprites.character1.movementTextures=[];a.sprites.character1.movementTextures[0]=a.sprites.character1.texture;
a.sprites.character1.movementTextures[1]=a.sprites.character2.texture;a.sprites.character1.movementTextures[2]=a.sprites.character3.texture;a.sprites.character1.checkMovementTexture=function(){0==this.velocity.x&&(this.texture=this.position.x>a.sprites.roller.position.x?a.sprites.character1.movementTextures[1]:a.sprites.character1.movementTextures[2]);0>this.velocity.x&&this.texture!=a.sprites.character1.movementTextures[1]&&(this.texture=a.sprites.character1.movementTextures[1]);0<this.velocity.x&&
this.texture!=a.sprites.character1.movementTextures[2]&&(this.texture=a.sprites.character1.movementTextures[2])};a.sprites.roller.anchor.x=.5;a.sprites.roller.anchor.y=.5;a.sprites.roller.visible=!1;a.sprites.roller.loop=!0;a.sprites.roller.position.x=a.s.designDim.w/2;a.sprites.roller.position.y=a.sprites.roller.height/2;g.addChild(a.sprites.roller);a.sprites.roller.bounce=a.s.physics.rollerBounce;a.sprites.roller.checkMovementTexture=function(){0==this.velocity.x&&0!=this.animationSpeed&&(this.animationSpeed=
0);0>this.velocity.x&&(this.animationSpeed=-1.8*Math.abs(this.velocity.x));0<this.velocity.x&&(this.animationSpeed=1.8*Math.abs(this.velocity.x))};e.push(a.sprites.roller);t.push(a.sprites.roller);a.sprites.roller.play();a.sprites.roller.checkIfOutside=function(){(0>this.position.x||this.position.x>a.s.designDim.w)&&b.destoryOldRoller()};t.push(a.sprites.wallLeft);t.push(a.sprites.wallRight);a.texts.scoreText.anchor.x=.5;a.texts.scoreText.anchor.y=.5;a.texts.scoreText.position.x=a.s.designDim.w/2;
a.texts.scoreText.position.y=a.s.designDim.h/2;g.addChild(a.texts.scoreText);for(var c in a.texts.highScoreTexts)a.texts.highScoreTexts[c].anchor.x=.5,a.texts.highScoreTexts[c].anchor.y=.5,a.texts.highScoreTexts[c].alpha=.08*(9-c)+.15,a.texts.highScoreTexts[c].position.x=a.s.designDim.w/2,a.texts.highScoreTexts[c].position.y=z+75*c,g.addChild(a.texts.highScoreTexts[c])};b.doPhysicsPart1=function(){for(var a in e){e[a].calculatePhysics();e[a].solvedCollisions=[];for(var b in t)e[a].checkIfCollision(t[b])}};
b.doPhysicsPart2=function(){for(var b in e)e[b].checkBottomHit(),e[b]===a.sprites.character1&&(e[b].checkLeftFull()&&(e[b].y>a.s.designDim.h/2?(e[b].onSurface=!1,e[b].velocity=new d(0,0),e[b].position=new d(a.s.designDim.w/2,a.s.designDim.w/4)):(e[b].position=new d(e[b].position.x+(a.sprites.wallRight.width/2,e[b].position.y)),e[b].velocity=new d(-1*e[b].velocity.x,e[b].velocity.y),e[b].position=new d(0+e[b].width/2,e[b].position.y))),e[b].checkRightFull()&&(e[b].y>a.s.designDim.h/2?(e[b].onSurface=
!1,e[b].velocity=new d(0,0),e[b].position=new d(a.s.designDim.w/2,a.s.designDim.w/4)):(e[b].position=new d(e[b].position.x-(a.sprites.wallRight.width/2,e[b].position.y)),e[b].velocity=new d(-1*e[b].velocity.x,e[b].velocity.y),e[b].position=new d(a.s.designDim.w-e[b].width/2,e[b].position.y))),e[b].checkTop()&&(e[b].velocity=new d(e[b].velocity.x,e[b].velocity.y*a.s.physics.characterTopBounce),e[b].position=new d(e[b].position.x,e[b].height/2))),"undefined"!=typeof e[b].checkMovementTexture&&e[b].checkMovementTexture()};
b.createNewCharacter=function(b){a.sprites.character1.position.x=2==b?a.s.designDim.w/4*3+a.sprites.character1.width/2:a.s.designDim.w/4*.5+a.sprites.character1.width/2;a.sprites.character1.position.y=a.s.designDim.h/2+a.sprites.character1.height/2};var x=0,p=0;b.createNewRoller=function(b){x=Math.floor(3*Math.random())+1;1==x&&(p=a.s.designDim.w/2-200);2==x&&(p=a.s.designDim.w/2);3==x&&(p=a.s.designDim.w/2+200);a.sprites.roller.position.x=p;a.sprites.roller.position.y=a.sprites.roller.height/2;a.sprites.roller.onSurface=
!1;a.sprites.roller.velocity=1==b?new d(a.s.physics.rollerOriginalXVelocity+a.points*a.s.physics.rollerPointsVelocityMultiplier,0):new d(-1*a.s.physics.rollerOriginalXVelocity-a.points*a.s.physics.rollerPointsVelocityMultiplier,0)};b.destoryOldRoller=function(){f.piste.audio.play();a.points++;a.texts.scoreText.text=a.points;b.createNewRoller(Math.floor(2*Math.random())+1)};b.runStartStartScreen=function(){a.sprites.background1.visible=!0;a.sprites.background2.visible=!1;a.sprites.buttonUp.visible=
!1;a.sprites.buttonDown.visible=!1;a.sprites.buttonLeft.visible=!1;a.sprites.wallBottom.visible=!1;a.sprites.buttonRight.visible=!1;a.sprites.wallLeft.visible=!1;a.sprites.wallRight.visible=!1;a.sprites.character1.visible=!1;a.sprites.roller.visible=!1;a.texts.scoreText.visible=!1;for(var b in a.texts.highScoreTexts)a.texts.highScoreTexts[b].visible=!0;a.gameState=a.s.GAME_STATES.START_SCREEN};b.runStartScreen=function(){b.ujellus_1_EngineRun(a.current.time.timeDiffNowMs);b.ujellus_3_EngineRun(a.current.time.timeDiffNowMs)};
b.runStartGame=function(){a.sprites.background1.visible=!1;a.sprites.background2.visible=!0;a.sprites.buttonUp.visible=!0;a.sprites.buttonDown.visible=!0;a.sprites.buttonLeft.visible=!0;a.sprites.buttonRight.visible=!0;a.sprites.wallLeft.visible=!0;a.sprites.wallRight.visible=!0;a.sprites.wallBottom.visible=!1;a.sprites.character1.visible=!0;a.sprites.roller.visible=!0;for(var c in a.texts.highScoreTexts)a.texts.highScoreTexts[c].visible=!1;a.points=0;a.texts.scoreText.text=0;a.texts.scoreText.visible=
!0;c=Math.floor(2*Math.random())+1;b.createNewRoller(c);b.createNewCharacter(c);a.sprites.character1.velocity=new d(0,0);a.sprites.character1.onSurface=!1;a.gameState=a.s.GAME_STATES.GAME_ON;f.game_start.audio.play()};b.runGameFrame=function(){b.ujellus_1_EngineRun(a.current.time.timeDiffNowMs);b.ujellus_2_EngineRun(a.current.time.timeDiffNowMs);b.ujellus_3_EngineRun(a.current.time.timeDiffNowMs);f.metsa.audio.playing?(f.metsa.currentTime+=a.current.time.timeDiffNowMs,24E3<f.metsa.currentTime&&(f.metsa.currentTime=
0,f.metsa.audio.play())):(f.metsa.currentTime=0,f.metsa.audio.playing=!0,f.metsa.audio.play());a.sprites.wallRight.move();a.sprites.wallLeft.move();a.sprites.roller.checkIfOutside();b.doPhysicsPart1();b.doPhysicsPart2()};b.runGamePaused=function(){};b.runStartGameOver=function(){f.game_over.audio.play();f.metsa.audio.playing=!1;f.metsa.audio.stop();f.metsa.currentTime=0;ttHighScoreManager.saveTop10(a.points);a.gameState=a.s.GAME_STATES.GAME_OVER};var C=0;b.runGameOver=function(){C>a.s.wait.gameOver?
(C=0,a.gameState=a.s.GAME_STATES.START_START_SCREEN):(a.sprites.roller.animationSpeed=0,C+=a.current.time.timeDiffNowMs)};b.runMainLoop=function(){function c(){b.loopCalculateTime();a.gameState==a.s.GAME_STATES.START_START_SCREEN&&b.runStartStartScreen();a.gameState==a.s.GAME_STATES.START_SCREEN&&b.runStartScreen();a.gameState==a.s.GAME_STATES.START_GAME&&b.runStartGame();a.gameState==a.s.GAME_STATES.GAME_ON&&b.runGameFrame();a.gameState==a.s.GAME_STATES.GAME_PAUSED&&b.runGamePaused();a.gameState==
a.s.GAME_STATES.START_GAME_OVER&&b.runStartGameOver();a.gameState==a.s.GAME_STATES.GAME_OVER&&b.runGameOver();r.render(g);window.requestAnimationFrame(c)}c()}})(window.ttMain=window.ttMain||{},jQuery);(function(a,c){a.mainRenderer;a.windowDim={w:0,h:0};a.gameArea={w:0,h:0,l:0,r:0,t:0,b:0};a.designDim={w:0,h:0};a.renderObjectId="not_defined";a.scalingFactor=1;a.nonGameArea={w:0,h:0};a.initRendererDimensions=function(c,d,e,f,g,l){a.mainRenderer=c;a.designDim.w=d;a.designDim.h=e;a.renderObjectId=f;a.nonGameArea.w=
g;a.nonGameArea.h=l;a.calculateRendererDimensions();a.scalingFactor=a.gameArea.w/a.designDim.w;return{w:a.gameArea.w,h:a.gameArea.h,l:a.gameArea.l,r:a.gameArea.r,t:a.gameArea.t,b:a.gameArea.b,scalingFactor:a.scalingFactor}};a.calculateRendererDimensions=function(){a.windowDim.w=window.innerWidth;a.windowDim.h=window.innerHeight;a.gameArea.h=1<=a.windowDim.h/a.designDim.h?a.designDim.h:a.windowDim.h;a.gameArea.w=a.designDim.w/a.designDim.h*a.gameArea.h;document.getElementById(a.renderObjectId).setAttribute("style",
"width:"+a.gameArea.w+"px; height:"+a.gameArea.h+"px; position:absolute;");a.gameArea.l=a.windowDim.w/2-a.gameArea.w/2;a.gameArea.r=a.gameArea.l+a.gameArea.w;a.gameArea.t=0;a.gameArea.b=a.gameArea.t+a.gameArea.h;document.getElementById(a.renderObjectId).style.left=a.gameArea.l};a.scaleRenderer=function(){a.calculateRendererDimensions();r.view.style.width=a.gameArea.w+"px";r.view.style.height=a.gameArea.h+"px"}})(window.ttScalingManager=window.ttScalingManager||{},jQuery);PIXI.Sprite.prototype.name=
"";PIXI.Sprite.prototype.acceleration=new d(0,0);PIXI.Sprite.prototype.pastAcceleration=new d(0,0);PIXI.Sprite.prototype.velocity=new d(0,0);PIXI.Sprite.prototype.pastVelocity=new d(0,0);PIXI.Sprite.prototype.pastPosition=new d(0,0);PIXI.Sprite.prototype.temporaryAccelerationImpulseX=0;PIXI.Sprite.prototype.temporaryAccelerationImpulseY=0;PIXI.Sprite.prototype.temporaryVelocityImpulseX=0;PIXI.Sprite.prototype.temporaryVelocityImpulseY=0;PIXI.Sprite.prototype.onSurface=!1;PIXI.Sprite.prototype.affectedByGravity=
!0;PIXI.Sprite.prototype.bounce=0;PIXI.Sprite.prototype.solvedCollisions=[];PIXI.Sprite.prototype.staticInCollision=!1;PIXI.Sprite.prototype.checkLeft=function(){return 0>=this.position.x-this.width/2?!0:!1};PIXI.Sprite.prototype.checkLeftFull=function(){return 0>=this.position.x+this.width/2?!0:!1};PIXI.Sprite.prototype.checkRight=function(){return this.position.x+this.width/2>=a.s.designDim.w?!0:!1};PIXI.Sprite.prototype.checkRightFull=function(){return this.position.x-this.width/2>=a.s.designDim.w?
!0:!1};PIXI.Sprite.prototype.checkTop=function(){return 0>=this.position.y-this.height/2?!0:!1};PIXI.Sprite.prototype.checkBottomHit=function(){1E4==this.bounce&&(this.bounce=0);this.position.y+this.height/2>=a.sprites.wallBottom.y&&!this.onSurface&&(this===a.sprites.roller&&f.G_pomp.audio.play(),this.position.x=this.position.x,this.position.y=a.sprites.wallBottom.position.y-this.height/2-.1,this.velocity=new d(this.velocity.x,-1*this.bounce*this.velocity.y),0==this.bounce?(this.onSurface=!0,this.acceleration=
new d(this.acceleration.x,0),this.velocity=new d(this.velocity.x,0)):2>Math.abs(this.velocity.y)&&(this.onSurface=!0,this.acceleration=new d(this.acceleration.x,0),this.velocity=new d(this.velocity.x,0)))};PIXI.Sprite.prototype.calculateAcceleration=function(){var b=0;1==this.affectedByGravity&&(this.onSurface||(b=this===a.sprites.character1?b+((a.s.designDim.h-a.sprites.character1.position.y)/a.s.designDim.h+a.s.physics.gravityOrigUser)*a.s.physics.gravityOrigUser:b+a.s.physics.gravityOrig));this.acceleration=
new d(this.acceleration.x+0*a.current.time.timeDiffNowMs,this.acceleration.y+b*a.current.time.timeDiffNowMs);this.acceleration.x>a.s.physics.limitAccelerationX&&(this.acceleration=new d(a.s.physics.limitAccelerationX,this.acceleration.y));this.acceleration.y>a.s.physics.limitAccelerationY&&(this.acceleration=new d(this.acceleration.x,a.s.physics.limitAccelerationY))};PIXI.Sprite.prototype.calculateVelocity=function(){var b=0,c=0;0!=this.temporaryVelocityImpulseX&&(b=this.temporaryVelocityImpulseX);
0!=this.temporaryVelocityImpulseY&&(c=this.temporaryVelocityImpulseY);this.velocity.add(new d(this.acceleration.x*a.current.time.timeDiffNowMs+b,this.acceleration.y*a.current.time.timeDiffNowMs+c));0!=this.tempVelocityImpulseY&&(this.temporaryVelocityImpulseY=0);0!=this.tempVelocityImpulseX&&(this.temporaryVelocityImpulseX=0);this.velocity.x>a.s.physics.limitVelocityX&&(this.velocity=new d(a.s.physics.limitVelocityX,this.velocity.y));this.velocity.x<-1*a.s.physics.limitVelocityX&&(this.velocity=new d(-1*
a.s.physics.limitVelocityX,this.velocity.y));this.velocity.y>a.s.physics.limitVelocityY&&(this.velocity=new d(this.velocity.x,a.s.physics.limitVelocityY));this.velocity.y<-1*a.s.physics.limitVelocityY&&(this.velocity=new d(this.velocity.x,-1*a.s.physics.limitVelocityY))};PIXI.Sprite.prototype.calculatePhysics=function(){this.pastAcceleration=new d(this.acceleration.x,this.acceleration.y);this.calculateAcceleration();this.pastVelocity=new d(this.velocity.x,this.velocity.y);this.calculateVelocity();
this.pastPosition=new d(this.position.x,this.position.y);this.setPhysicsCalculatedPosition(new d(this.position.x+this.velocity.x*a.current.time.timeDiffNowMs,this.position.y+this.velocity.y*a.current.time.timeDiffNowMs))};PIXI.Sprite.prototype.setPhysicsCalculatedPosition=function(a){this.position.x=a.x;this.position.y=a.y};PIXI.Sprite.prototype.temporaryVelocityImpulse=function(b){"up"==b&&(this.temporaryVelocityImpulseY=a.s.physics.userSpeedUp);"left"==b&&(this.temporaryVelocityImpulseX=a.s.physics.userSpeedLeft);
"right"==b&&(this.temporaryVelocityImpulseX=a.s.physics.userSpeedRight);"down"==b&&this.zeroAccelerationAndVelocity()};PIXI.Sprite.prototype.zeroAccelerationAndVelocity=function(a){this.acceleration.x=0;this.acceleration.y=0;this.velocity.x=0;this.velocity.y=0};PIXI.Sprite.prototype.checkIfCollision=function(b){var c=!1;if(b!==this){for(var e in b.solvedCollisions)b.solvedCollisions[e]===this&&(c=!0);if(!c&&(e=this.minkowskiDifference(b),c=new d(e.position.x-e.width/2,e.position.y-e.height/2),e=new d(e.position.x+
e.width/2,e.position.y+e.height/2),0>=c.x&&0<=e.x&&0>=c.y&&0<=e.y)){y.clearRect(0,0,l.width,l.height);y.drawImage(this.texture.baseTexture.source,0,0);bitmapData1=y.getImageData(0,0,this.width,this.height);y.clearRect(0,0,l.width,l.height);y.drawImage(b.texture.baseTexture.source,0,0);bitmapData2=y.getImageData(0,0,b.width,b.height);a:{c=this.position.x;e=this.position.y;var p=b.position.x,g=b.position.y,c=Math.round(c);e=Math.round(e);var p=Math.round(p),g=Math.round(g),h=bitmapData1.width,k=bitmapData1.height,
n=bitmapData2.width,m=bitmapData2.height,c=c-(h/2+.5<<0);e-=k/2+.5<<0;var p=p-(n/2+.5<<0),g=g-(m/2+.5<<0),r=Math.max(c,p),t=Math.max(e,g),u=Math.min(c+h,p+n),k=Math.min(e+k,g+m);if(!(r>=u||t>=k)){var v=u-r,q=k-t,m=bitmapData1.data,B=bitmapData2.data;if(4>v&&4>q)for(q=r;q<u;q++)for(var w=t;w<k;w++){if(0!==m[4*(q-c+(w-e)*h)+3]&&0!==B[4*(q-p+(w-g)*n)+3]){c=!0;break a}}else for(var v=v/3,A=q/3,v=~~v===v?v:v+1|0,A=~~A===A?A:A+1|0,z=0;z<A;z++)for(var D=0;D<v;D++)for(w=t+z;w<k;w+=A)for(q=r+D;q<u;q+=v)if(0!==
m[4*(q-c+(w-e)*h)+3]&&0!==B[4*(q-p+(w-g)*n)+3]){c=!0;break a}}c=!1}if(c&&(this===a.sprites.character1&&(b===a.sprites.wallRight&&(this.position=new d(a.sprites.wallRight.position.x-a.sprites.wallRight.width/2-this.width/2,this.pastPosition.y),this.velocity=new d(-1*this.velocity.x,this.velocity.y),b.moveDirection="up"==b.moveDirection?"down":"up"),b===a.sprites.wallLeft&&(this.position=new d(a.sprites.wallLeft.position.x+a.sprites.wallLeft.width/2+this.width/2,this.pastPosition.y),this.velocity=new d(-1*
this.velocity.x,this.velocity.y),b.moveDirection="up"==b.moveDirection?"down":"up"),b===a.sprites.roller&&(a.gameState=a.s.GAME_STATES.START_GAME_OVER)),this===a.sprites.roller)){if(b===a.sprites.wallRight||b===a.sprites.wallLeft)f.G_pomp.audio.play(),this.position=new d(this.pastPosition.x,this.pastPosition.y),this.velocity=new d(-1*this.velocity.x,this.velocity.y),b.moveDirection="up";b===a.sprites.character1&&(a.gameState=a.s.GAME_STATES.START_GAME_OVER)}this.solvedCollisions.push(b)}}};PIXI.Sprite.prototype.minkowskiDifference=
function(a){if(a!==this){var c=new d(this.position.x-this.width/2,this.position.y-this.height/2),e=new d(a.position.x+a.width/2,a.position.y+a.height/2),f=new d(this.width,this.height);a=new d(a.width,a.height);c=new d(c.x-e.x,c.y-e.y);f=new d(f.x+a.x,f.y+a.y);e=new PIXI.Sprite(E);e.width=f.x;e.height=f.y;e.position.x=c.x+e.width/2;e.position.y=c.y+e.height/2;return e}};PIXI.Sprite.prototype.getMinVector=function(){return new d(this.position.x-this.width/2,this.position.y-this.height/2)};PIXI.Sprite.prototype.getMaxVector=
function(){return new d(this.position.x+this.width/2,this.position.y+this.height/2)};PIXI.Sprite.prototype.getSizeVector=function(){return new d(this.width,this.height)};d.prototype.add=function(a){this.x+=a.x;this.y+=a.y};d.prototype.substract=function(a){this.x-=a.x;this.y-=a.y};d.prototype.multiply=function(a){this.x*=a;this.y*=a};d.prototype.getMagnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};d.prototype.getAngle=function(){return Math.atan2(this.y,this.x)};d.fromAngle=function(a,
c){return new d(c*Math.cos(a),c*Math.sin(a))};m.press=u.press=function(b){a.gameState=a.s.GAME_STATES.START_GAME};m.release=u.release=function(a){}})(window.tt=window.tt||{},jQuery);